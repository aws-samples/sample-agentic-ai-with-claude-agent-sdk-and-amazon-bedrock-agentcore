table_name: course_performance_analytics
version: "1.0"
record_count: 500

metadata:
  purpose: "Course difficulty, instructor effectiveness, and enrollment metrics"
  updated_at: "2026-01-14"

columns:
  # Course Context
  - name: course_id
    type: INTEGER
    description: "Unique identifier for the course"
    nullable: false
    primary_key: true
    statistics:
      min: 1
      max: 500

  - name: course_code
    type: VARCHAR(20)
    description: "Course code (e.g., CS101, MATH201)"
    nullable: false

  - name: course_name
    type: VARCHAR(200)
    description: "Full name of the course"
    nullable: false

  - name: course_credits
    type: INTEGER
    description: "Number of credits for the course"
    nullable: false
    value_type: categorical
    possible_values:
      - 3
      - 4
      - 5

  - name: course_type
    type: VARCHAR(50)
    description: "Format/delivery method of the course"
    nullable: false
    value_type: categorical
    possible_values:
      - "Lecture"
      - "Lab"
      - "Seminar"
      - "Workshop"
      - "Online"

  - name: course_level
    type: INTEGER
    description: "Course level (1-4, extracted from course code)"
    nullable: false
    value_type: categorical
    possible_values:
      - value: 1
        description: "100-level (introductory)"
      - value: 2
        description: "200-level (intermediate)"
      - value: 3
        description: "300-level (advanced)"
      - value: 4
        description: "400-level (senior/graduate)"

  - name: semester
    type: VARCHAR(50)
    description: "Semester when course was offered"
    nullable: false
    value_type: categorical
    possible_values:
      - "Fall 2024"
      - "Spring 2024"
      - "Fall 2023"
      - "Spring 2023"

  - name: max_enrollment
    type: INTEGER
    description: "Maximum capacity for the course"
    nullable: false
    statistics:
      min: 20
      max: 200

  # Department Context
  - name: department_id
    type: INTEGER
    description: "Department ID"
    nullable: false

  - name: department_name
    type: VARCHAR(100)
    description: "Department offering the course"
    nullable: false
    value_type: categorical

  - name: dean_name
    type: VARCHAR(200)
    description: "Name of the department dean"
    nullable: false

  - name: department_budget
    type: INTEGER
    description: "Department budget amount"
    nullable: false
    statistics:
      min: 500000
      max: 5000000

  - name: building_name
    type: VARCHAR(100)
    description: "Building where department is located"
    nullable: false

  # Instructor Context
  - name: instructor_id
    type: INTEGER
    description: "Instructor ID"
    nullable: false

  - name: instructor_first_name
    type: VARCHAR(100)
    description: "Instructor's first name"
    nullable: false

  - name: instructor_last_name
    type: VARCHAR(100)
    description: "Instructor's last name"
    nullable: false

  - name: instructor_rank
    type: VARCHAR(50)
    description: "Academic rank of the instructor"
    nullable: false
    value_type: categorical
    possible_values:
      - "Professor"
      - "Associate Professor"
      - "Assistant Professor"
      - "Lecturer"
      - "Adjunct"

  - name: instructor_email
    type: VARCHAR(200)
    description: "Instructor's email address"
    nullable: false

  - name: instructor_hire_date
    type: DATE
    description: "Date when instructor was hired"
    nullable: false

  - name: instructor_salary
    type: INTEGER
    description: "Instructor's annual salary"
    nullable: false
    statistics:
      min: 60000
      max: 180000

  - name: instructor_office
    type: VARCHAR(10)
    description: "Instructor's office number"
    nullable: false

  # Enrollment Metrics (Pre-aggregated)
  - name: total_enrolled
    type: INTEGER
    description: "Total students enrolled at start"
    nullable: false

  - name: total_completed
    type: INTEGER
    description: "Total students who completed the course"
    nullable: false

  - name: total_dropped
    type: INTEGER
    description: "Total students who dropped the course"
    nullable: false

  - name: current_enrollment
    type: INTEGER
    description: "Current number of enrolled students"
    nullable: false

  - name: enrollment_rate_pct
    type: DECIMAL(5,2)
    description: "Percentage of max capacity filled"
    nullable: false
    statistics:
      min: 0.00
      max: 100.00

  - name: drop_rate_pct
    type: DECIMAL(5,2)
    description: "Percentage of students who dropped"
    nullable: false

  # Grade Metrics (Pre-aggregated)
  - name: total_grades
    type: INTEGER
    description: "Total number of grades given"
    nullable: false

  - name: avg_numeric_grade
    type: DECIMAL(3,2)
    description: "Average numeric grade (0.0-4.0)"
    nullable: false
    statistics:
      min: 2.50
      max: 3.80

  - name: avg_gpa
    type: DECIMAL(3,2)
    description: "Average GPA for the course"
    nullable: false

  - name: median_grade
    type: DECIMAL(3,2)
    description: "Median grade"
    nullable: false

  - name: mode_letter_grade
    type: VARCHAR(5)
    description: "Most common letter grade"
    nullable: false
    value_type: categorical
    possible_values:
      - "A"
      - "B+"
      - "B"
      - "C+"

  - name: a_grade_count
    type: INTEGER
    description: "Number of A grades"
    nullable: false

  - name: b_grade_count
    type: INTEGER
    description: "Number of B grades"
    nullable: false

  - name: c_grade_count
    type: INTEGER
    description: "Number of C grades"
    nullable: false

  - name: d_grade_count
    type: INTEGER
    description: "Number of D grades"
    nullable: false

  - name: f_grade_count
    type: INTEGER
    description: "Number of F grades (failures)"
    nullable: false

  - name: pass_rate_pct
    type: DECIMAL(5,2)
    description: "Percentage of students who passed"
    nullable: false

  - name: fail_rate_pct
    type: DECIMAL(5,2)
    description: "Percentage of students who failed"
    nullable: false

  # Student Feedback Metrics (Pre-aggregated)
  - name: total_feedback_count
    type: INTEGER
    description: "Number of student feedback responses"
    nullable: false

  - name: avg_overall_rating
    type: DECIMAL(3,2)
    description: "Average overall course rating"
    nullable: false
    statistics:
      min: 3.00
      max: 5.00

  - name: avg_course_content_rating
    type: DECIMAL(3,2)
    description: "Average rating for course content"
    nullable: false

  - name: avg_instructor_rating
    type: DECIMAL(3,2)
    description: "Average rating for instructor"
    nullable: false

  - name: avg_difficulty_rating
    type: DECIMAL(3,2)
    description: "Average difficulty rating (1-5)"
    nullable: false
    statistics:
      min: 2.00
      max: 4.50

  - name: avg_workload_rating
    type: DECIMAL(3,2)
    description: "Average workload rating"
    nullable: false

  - name: would_recommend_pct
    type: DECIMAL(5,2)
    description: "Percentage who would recommend the course"
    nullable: false
    statistics:
      min: 60.00
      max: 95.00

  # Attendance Metrics (Pre-aggregated)
  - name: avg_attendance_rate_pct
    type: DECIMAL(5,2)
    description: "Average attendance rate for the course"
    nullable: false
    statistics:
      min: 75.00
      max: 95.00

  - name: absent_count_avg
    type: DECIMAL(3,1)
    description: "Average number of absences per student"
    nullable: false

  - name: late_count_avg
    type: DECIMAL(3,1)
    description: "Average number of late arrivals per student"
    nullable: false

  - name: excused_absence_avg
    type: DECIMAL(3,1)
    description: "Average number of excused absences per student"
    nullable: false

  # Comparative Metrics
  - name: course_grade_vs_dept_avg
    type: DECIMAL(3,2)
    description: "Course average grade compared to department average"
    nullable: false

  - name: course_rating_vs_dept_avg
    type: DECIMAL(3,2)
    description: "Course rating compared to department average"
    nullable: false

  - name: course_difficulty_vs_grade_correlation
    type: DECIMAL(3,2)
    description: "Correlation between difficulty rating and grades"
    nullable: false

  # Flags
  - name: is_high_enrollment
    type: BOOLEAN
    description: "True if current enrollment > 90% of max capacity"
    nullable: false

  - name: is_high_failure_rate
    type: BOOLEAN
    description: "True if failure rate > 15%"
    nullable: false

  - name: is_highly_rated
    type: BOOLEAN
    description: "True if average rating >= 4.5"
    nullable: false

  - name: is_difficult_course
    type: BOOLEAN
    description: "True if average numeric grade < 2.8"
    nullable: false

# Relationships
relationships:
  - target_table: "student_academic_performance"
    join_keys:
      - course_id
    relationship_type: "one-to-many"
    description: "One course has many student grades"

# Indexes
indexes:
  - columns: [course_id]
    type: "primary_key"
  - columns: [is_high_failure_rate]
    type: "index"
    usage: "Frequently used to identify difficult courses"
  - columns: [is_highly_rated]
    type: "index"
    usage: "Frequently used to find top-rated courses"
