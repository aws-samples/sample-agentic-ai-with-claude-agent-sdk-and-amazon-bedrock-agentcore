table_name: student_academic_performance
version: "1.0"
record_count: 45000

metadata:
  purpose: "Student grades and academic performance data"
  updated_at: "2026-01-14"

columns:
  # Student Context (Denormalized)
  - name: student_id
    type: INTEGER
    description: "Unique identifier for each student"
    nullable: false
    statistics:
      min: 1
      max: 10000
      distinct_count: 10000

  - name: student_first_name
    type: VARCHAR(100)
    description: "Student's first name"
    nullable: false

  - name: student_last_name
    type: VARCHAR(100)
    description: "Student's last name"
    nullable: false

  - name: student_email
    type: VARCHAR(200)
    description: "Student's email address"
    nullable: false

  - name: student_major
    type: VARCHAR(100)
    description: "Student's declared major/program of study"
    nullable: false
    value_type: categorical
    possible_values:
      - "Computer Science"
      - "Business"
      - "Engineering"
      - "Biology"
      - "Psychology"
      - "Economics"
      - "Mathematics"
      - "English"
      - "History"
      - "Physics"
    query_notes: "Same 10 majors as enrollment table, evenly distributed"

  - name: student_overall_gpa
    type: DECIMAL(3,2)
    description: "Student's overall cumulative GPA"
    nullable: false
    value_type: continuous
    statistics:
      min: 2.00
      max: 4.00

  - name: student_status
    type: VARCHAR(50)
    description: "Current enrollment status of the student"
    nullable: false
    value_type: categorical
    possible_values:
      - value: "Active"
        description: "Currently enrolled"
        frequency: 0.67
      - value: "Graduated"
        description: "Completed degree"
        frequency: 0.17
      - value: "On Leave"
        description: "Temporarily not attending"
        frequency: 0.17

  - name: student_credits_completed
    type: INTEGER
    description: "Total number of credits the student has completed"
    nullable: false
    value_type: continuous
    statistics:
      min: 0
      max: 120

  - name: student_cohort_year
    type: INTEGER
    description: "Year student first enrolled"
    nullable: false

  # Course Context (Denormalized)
  - name: course_id
    type: INTEGER
    description: "Unique identifier for the course"
    nullable: false
    statistics:
      min: 1
      max: 500

  - name: course_code
    type: VARCHAR(20)
    description: "Course code (e.g., CS101, MATH201)"
    nullable: false

  - name: course_name
    type: VARCHAR(200)
    description: "Full name of the course"
    nullable: false

  - name: course_credits
    type: INTEGER
    description: "Number of credits for the course"
    nullable: false
    value_type: categorical
    possible_values:
      - 3
      - 4
      - 5

  - name: department_name
    type: VARCHAR(100)
    description: "Department offering the course"
    nullable: false
    value_type: categorical
    query_notes: "Same 20 departments as enrollment table"

  - name: course_level
    type: INTEGER
    description: "Course level (1-4, extracted from course code)"
    nullable: false
    value_type: categorical
    possible_values:
      - value: 1
        description: "100-level (introductory)"
      - value: 2
        description: "200-level (intermediate)"
      - value: 3
        description: "300-level (advanced)"
      - value: 4
        description: "400-level (senior/graduate)"
    query_notes: "Indicates course difficulty/year level"

  - name: course_type
    type: VARCHAR(50)
    description: "Format/delivery method of the course"
    nullable: false
    value_type: categorical
    possible_values:
      - "Lecture"
      - "Lab"
      - "Seminar"
      - "Workshop"
      - "Online"

  # Instructor Context (Denormalized)
  - name: instructor_id
    type: INTEGER
    description: "Unique identifier for the instructor"
    nullable: false
    statistics:
      min: 1
      max: 200

  - name: instructor_name
    type: VARCHAR(200)
    description: "Full name of the instructor"
    nullable: false

  - name: instructor_rank
    type: VARCHAR(50)
    description: "Academic rank of the instructor"
    nullable: false
    value_type: categorical
    possible_values:
      - "Professor"
      - "Associate Professor"
      - "Assistant Professor"
      - "Lecturer"
      - "Adjunct"

  - name: instructor_avg_rating
    type: DECIMAL(3,2)
    description: "Instructor's average rating"
    nullable: false
    value_type: continuous
    statistics:
      min: 3.00
      max: 5.00

  - name: instructor_department
    type: VARCHAR(100)
    description: "Department where instructor is assigned"
    nullable: false

  # Grade Facts
  - name: grade_id
    type: INTEGER
    description: "Unique identifier for this grade record"
    nullable: false
    primary_key: true

  - name: letter_grade
    type: VARCHAR(5)
    description: "Letter grade received (A, A-, B+, etc.)"
    nullable: false
    value_type: categorical
    possible_values:
      - value: "A"
        description: "Excellent (4.0)"
        frequency: 0.10
      - value: "A-"
        description: "Excellent (3.7)"
        frequency: 0.10
      - value: "B+"
        description: "Good (3.3)"
        frequency: 0.10
      - value: "B"
        description: "Good (3.0)"
        frequency: 0.10
      - value: "B-"
        description: "Above Average (2.7)"
        frequency: 0.10
      - value: "C+"
        description: "Average (2.3)"
        frequency: 0.10
      - value: "C"
        description: "Average (2.0)"
        frequency: 0.10
      - value: "C-"
        description: "Below Average (1.7)"
        frequency: 0.10
      - value: "D"
        description: "Poor (1.0)"
        frequency: 0.10
      - value: "F"
        description: "Fail (0.0)"
        frequency: 0.10
    query_notes: "Evenly distributed in demo data. A through C- are passing grades."

  - name: numeric_grade
    type: DECIMAL(3,1)
    description: "Numeric grade point equivalent"
    nullable: false
    value_type: continuous
    statistics:
      min: 0.0
      max: 4.0
    query_notes: "Mapping: A=4.0, A-=3.7, B+=3.3, B=3.0, B-=2.7, C+=2.3, C=2.0, C-=1.7, D=1.0, F=0.0"

  - name: percentage_score
    type: DECIMAL(5,2)
    description: "Percentage score (0-100)"
    nullable: false
    value_type: continuous
    statistics:
      min: 0.00
      max: 100.00
    query_notes: "Passing grades typically 60-100%, failing grades 0-60%"

  - name: semester
    type: VARCHAR(50)
    description: "Semester when grade was received"
    nullable: false
    value_type: categorical
    possible_values:
      - "Fall 2024"
      - "Spring 2024"
      - "Fall 2023"
      - "Spring 2023"

  - name: grade_date
    type: DATE
    description: "Date when grade was recorded"
    nullable: false
    value_type: continuous
    statistics:
      range: "Last 2 years from data generation date"

  # Performance Metrics (Pre-calculated)
  - name: student_semester_gpa
    type: DECIMAL(3,2)
    description: "Student's GPA for this semester"
    nullable: false
    value_type: continuous
    statistics:
      min: 0.00
      max: 4.00

  - name: student_cumulative_gpa
    type: DECIMAL(3,2)
    description: "Student's cumulative GPA across all semesters"
    nullable: false
    value_type: continuous
    statistics:
      min: 0.00
      max: 4.00

  - name: course_avg_grade
    type: DECIMAL(3,2)
    description: "Average grade for all students in this course"
    nullable: false
    value_type: continuous

  - name: course_grade_percentile
    type: DECIMAL(5,2)
    description: "Student's percentile rank within the course"
    nullable: false
    value_type: continuous
    statistics:
      min: 0.00
      max: 100.00

  - name: grade_points_earned
    type: DECIMAL(5,2)
    description: "Grade points earned (credits × numeric_grade)"
    nullable: false
    value_type: continuous

  # Flags
  - name: is_passing
    type: BOOLEAN
    description: "True if grade is C- or better"
    nullable: false
    value_type: boolean
    query_notes: "Passing grades: A, A-, B+, B, B-, C+, C, C-. Failing: D, F"

  - name: is_honor_roll
    type: BOOLEAN
    description: "True if student GPA >= 3.5"
    nullable: false
    value_type: boolean
    query_notes: "Used to identify high-performing students"

  - name: is_at_risk
    type: BOOLEAN
    description: "True if student GPA < 2.5"
    nullable: false
    value_type: boolean
    query_notes: "Used to identify students needing academic support"

  - name: is_dean_list
    type: BOOLEAN
    description: "True if student GPA >= 3.75"
    nullable: false
    value_type: boolean
    query_notes: "Dean's list threshold is higher than honor roll"

  # Aggregations
  - name: student_total_courses
    type: INTEGER
    description: "Total number of courses student has taken"
    nullable: false
    value_type: continuous
    statistics:
      min: 5
      max: 30

  - name: student_courses_passed
    type: INTEGER
    description: "Number of courses student has passed"
    nullable: false
    value_type: continuous

  - name: student_courses_failed
    type: INTEGER
    description: "Number of courses student has failed"
    nullable: false
    value_type: continuous

  - name: pass_rate_pct
    type: DECIMAL(5,2)
    description: "Percentage of courses student has passed"
    nullable: false
    value_type: continuous
    statistics:
      min: 70.00
      max: 100.00
    query_notes: "Calculated as (courses_passed / total_courses) × 100"

# Relationships
relationships:
  - target_table: "student_enrollment_analytics"
    join_keys:
      - student_id
    relationship_type: "many-to-one"
    description: "Many performance records for each student"

  - target_table: "course_performance_analytics"
    join_keys:
      - course_id
    relationship_type: "many-to-one"
    description: "Many student grades for each course"

# Indexes
indexes:
  - columns: [grade_id]
    type: "primary_key"
  - columns: [student_id]
    type: "index"
    usage: "Frequently used for student-level queries"
  - columns: [course_id]
    type: "index"
    usage: "Frequently used for course-level analysis"
  - columns: [letter_grade]
    type: "index"
    usage: "Common for grade distribution queries"
  - columns: [is_honor_roll]
    type: "index"
    usage: "Frequently used to filter high-performing students"
  - columns: [is_at_risk]
    type: "index"
    usage: "Frequently used to identify students needing support"
