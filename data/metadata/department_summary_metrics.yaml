table_name: department_summary_metrics
version: "1.0"
record_count: 20

metadata:
  purpose: "Department-level aggregate metrics for students, instructors, courses, and finances"
  updated_at: "2026-01-14"

columns:
  # Department Context
  - name: department_id
    type: INTEGER
    description: "Unique identifier for each department"
    nullable: false
    primary_key: true
    statistics:
      min: 1
      max: 20
      distinct_count: 20

  - name: department_name
    type: VARCHAR(100)
    description: "Name of the department"
    nullable: false
    value_type: categorical
    possible_values:
      - "Computer Science"
      - "Mathematics"
      - "Physics"
      - "Chemistry"
      - "Biology"
      - "English"
      - "History"
      - "Psychology"
      - "Economics"
      - "Business Administration"
      - "Engineering"
      - "Nursing"
      - "Education"
      - "Art"
      - "Music"
      - "Philosophy"
      - "Sociology"
      - "Political Science"
      - "Communications"
      - "Statistics"

  - name: dean_name
    type: VARCHAR(100)
    description: "Name of the department dean"
    nullable: false

  - name: building_name
    type: VARCHAR(100)
    description: "Building where department is located"
    nullable: false

  - name: established_year
    type: INTEGER
    description: "Year the department was established"
    nullable: false
    value_type: continuous
    statistics:
      min: 1950
      max: 2010

  - name: budget_amount
    type: DECIMAL(10,2)
    description: "Department's annual budget"
    nullable: false
    value_type: continuous
    statistics:
      min: 500000.00
      max: 5000000.00

  # Student Metrics (Pre-aggregated)
  - name: total_students_enrolled
    type: INTEGER
    description: "Total number of students majoring in this department"
    nullable: false
    value_type: continuous
    query_notes: "Pre-aggregated count of all students by major"

  - name: total_students_active
    type: INTEGER
    description: "Number of currently active students"
    nullable: false
    value_type: continuous
    query_notes: "Count where student_status = 'Active'"

  - name: total_students_graduated
    type: INTEGER
    description: "Number of graduated students"
    nullable: false
    value_type: continuous
    query_notes: "Pre-aggregated count of graduates"

  - name: avg_student_gpa
    type: DECIMAL(3,2)
    description: "Average GPA of students in this department"
    nullable: false
    value_type: continuous
    query_notes: "Pre-calculated average across all department students"

  - name: students_on_deans_list
    type: INTEGER
    description: "Number of students with GPA >= 3.7"
    nullable: false
    value_type: continuous
    query_notes: "Pre-aggregated count of high-performing students"

  - name: students_at_risk
    type: INTEGER
    description: "Number of students with GPA < 2.5"
    nullable: false
    value_type: continuous
    query_notes: "Pre-aggregated count of at-risk students"

  # Instructor Metrics (Pre-aggregated)
  - name: total_instructors
    type: INTEGER
    description: "Total number of instructors in department"
    nullable: false
    value_type: continuous
    query_notes: "Pre-aggregated count"

  - name: professor_count
    type: INTEGER
    description: "Number of full professors"
    nullable: false
    value_type: continuous

  - name: associate_prof_count
    type: INTEGER
    description: "Number of associate professors"
    nullable: false
    value_type: continuous

  - name: assistant_prof_count
    type: INTEGER
    description: "Number of assistant professors"
    nullable: false
    value_type: continuous

  - name: lecturer_count
    type: INTEGER
    description: "Number of lecturers"
    nullable: false
    value_type: continuous

  - name: adjunct_count
    type: INTEGER
    description: "Number of adjunct faculty"
    nullable: false
    value_type: continuous

  - name: avg_instructor_rating
    type: DECIMAL(3,2)
    description: "Average rating of all instructors in department"
    nullable: false
    value_type: continuous
    statistics:
      min: 3.50
      max: 4.80
    query_notes: "Pre-calculated department-wide average"

  - name: avg_instructor_salary
    type: DECIMAL(10,2)
    description: "Average instructor salary in department"
    nullable: false
    value_type: continuous
    query_notes: "Pre-calculated average across all instructors"

  # Course Metrics (Pre-aggregated)
  - name: total_courses_offered
    type: INTEGER
    description: "Total number of courses offered by department"
    nullable: false
    value_type: continuous
    query_notes: "Pre-aggregated count of courses"

  - name: total_enrollments
    type: INTEGER
    description: "Total number of course enrollments in department"
    nullable: false
    value_type: continuous
    query_notes: "Sum of all student enrollments across department courses"

  - name: avg_class_size
    type: DECIMAL(5,1)
    description: "Average number of students per course"
    nullable: false
    value_type: continuous
    query_notes: "Calculated as total_enrollments / total_courses_offered"

  - name: avg_course_rating
    type: DECIMAL(3,2)
    description: "Average rating of courses in department"
    nullable: false
    value_type: continuous
    statistics:
      min: 3.50
      max: 4.80

  - name: avg_pass_rate_pct
    type: DECIMAL(5,2)
    description: "Average pass rate across all department courses"
    nullable: false
    value_type: continuous
    statistics:
      min: 80.00
      max: 95.00
    query_notes: "Pre-calculated department-wide average"

  - name: avg_course_grade
    type: DECIMAL(3,2)
    description: "Average grade given across all department courses"
    nullable: false
    value_type: continuous
    statistics:
      min: 2.80
      max: 3.50

  # Financial Metrics (Pre-aggregated)
  - name: total_tuition_revenue
    type: DECIMAL(12,2)
    description: "Total tuition revenue generated by department students"
    nullable: false
    value_type: continuous
    query_notes: "Pre-calculated sum of tuition from all students"

  - name: total_scholarships_distributed
    type: DECIMAL(12,2)
    description: "Total scholarship amount awarded to department students"
    nullable: false
    value_type: continuous
    query_notes: "Pre-calculated sum of all scholarships"

  - name: net_revenue
    type: DECIMAL(12,2)
    description: "Net revenue after scholarships"
    nullable: false
    value_type: continuous
    query_notes: "Calculated as total_tuition_revenue - total_scholarships_distributed"

  - name: budget_per_student
    type: DECIMAL(10,2)
    description: "Department budget divided by number of students"
    nullable: false
    value_type: continuous
    query_notes: "Calculated as budget_amount / total_students_enrolled"

  - name: revenue_per_instructor
    type: DECIMAL(10,2)
    description: "Revenue generated per instructor"
    nullable: false
    value_type: continuous
    query_notes: "Calculated as total_tuition_revenue / total_instructors"

  # Growth Metrics (Pre-calculated)
  - name: enrollment_yoy_growth_pct
    type: DECIMAL(5,2)
    description: "Year-over-year enrollment growth percentage"
    nullable: false
    value_type: continuous
    statistics:
      min: -5.00
      max: 15.00
    query_notes: "Positive indicates growth, negative indicates decline"

  - name: revenue_yoy_growth_pct
    type: DECIMAL(5,2)
    description: "Year-over-year revenue growth percentage"
    nullable: false
    value_type: continuous
    statistics:
      min: -3.00
      max: 12.00

  - name: graduation_rate_pct
    type: DECIMAL(5,2)
    description: "Percentage of students who graduate"
    nullable: false
    value_type: continuous
    statistics:
      min: 65.00
      max: 90.00
    query_notes: "Pre-calculated graduation rate"

  - name: retention_rate_pct
    type: DECIMAL(5,2)
    description: "Percentage of students who continue enrollment"
    nullable: false
    value_type: continuous
    statistics:
      min: 80.00
      max: 95.00

  # Semester Comparisons
  - name: fall_2024_enrollment
    type: INTEGER
    description: "Number of students enrolled in Fall 2024"
    nullable: false
    value_type: continuous

  - name: spring_2024_enrollment
    type: INTEGER
    description: "Number of students enrolled in Spring 2024"
    nullable: false
    value_type: continuous

  - name: fall_2023_enrollment
    type: INTEGER
    description: "Number of students enrolled in Fall 2023"
    nullable: false
    value_type: continuous

  - name: enrollment_trend
    type: VARCHAR(20)
    description: "Overall enrollment trend direction"
    nullable: false
    value_type: categorical
    possible_values:
      - value: "Growing"
        description: "Enrollment is increasing"
      - value: "Stable"
        description: "Enrollment is stable"
      - value: "Declining"
        description: "Enrollment is decreasing"

  # Rankings (Pre-calculated)
  - name: enrollment_rank
    type: INTEGER
    description: "Department's rank by total enrollment"
    nullable: false
    value_type: continuous
    statistics:
      min: 1
      max: 10
    query_notes: "1 is highest enrollment, lower is better"

  - name: gpa_rank
    type: INTEGER
    description: "Department's rank by average GPA"
    nullable: false
    value_type: continuous
    statistics:
      min: 1
      max: 10

  - name: rating_rank
    type: INTEGER
    description: "Department's rank by average rating"
    nullable: false
    value_type: continuous
    statistics:
      min: 1
      max: 10

  - name: revenue_rank
    type: INTEGER
    description: "Department's rank by total revenue"
    nullable: false
    value_type: continuous
    statistics:
      min: 1
      max: 10

  - name: graduation_rate_rank
    type: INTEGER
    description: "Department's rank by graduation rate"
    nullable: false
    value_type: continuous
    statistics:
      min: 1
      max: 10

  # Flags
  - name: is_growing_enrollment
    type: BOOLEAN
    description: "True if enrollment is increasing"
    nullable: false
    value_type: boolean
    query_notes: "Based on enrollment_trend or YoY growth"

  - name: is_high_performing
    type: BOOLEAN
    description: "True if avg_student_gpa >= 3.3"
    nullable: false
    value_type: boolean
    query_notes: "Identifies academically strong departments"

  - name: is_budget_efficient
    type: BOOLEAN
    description: "True if department operates efficiently relative to budget"
    nullable: false
    value_type: boolean

  - name: has_scholarship_program
    type: BOOLEAN
    description: "True if department has active scholarship programs"
    nullable: false
    value_type: boolean
    query_notes: "Based on total_scholarships_distributed > 0"

# Relationships
relationships:
  - target_table: "student_enrollment_analytics"
    join_keys:
      - department_id
    relationship_type: "one-to-many"
    description: "One department has many student enrollments"

  - target_table: "instructor_performance_summary"
    join_keys:
      - department_id
    relationship_type: "one-to-many"
    description: "One department has many instructors"

  - target_table: "course_performance_analytics"
    join_keys:
      - department_id
    relationship_type: "one-to-many"
    description: "One department offers many courses"

# Indexes
indexes:
  - columns: [department_id]
    type: "primary_key"
  - columns: [department_name]
    type: "index"
    usage: "Frequently used for department lookups"
  - columns: [is_high_performing]
    type: "index"
    usage: "Common filter for identifying top departments"
  - columns: [avg_student_gpa]
    type: "index"
    usage: "Frequently used for ranking departments"
  - columns: [enrollment_trend]
    type: "index"
    usage: "Common for analyzing growth patterns"
